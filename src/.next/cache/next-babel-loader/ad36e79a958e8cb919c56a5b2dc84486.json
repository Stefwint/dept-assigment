{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { get } from '../api/callers';\nvar isServer = !false;\nvar clientStore = isServer ? null : {};\n\nfunction fetchGlobalData() {\n  var menus, result;\n  return _regeneratorRuntime.async(function fetchGlobalData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          menus = get('menus/').then(function (resp) {\n            return resp === null || resp === void 0 ? void 0 : resp.menus;\n          });\n          result = Promise.all([menus]).then(function (values) {\n            return {\n              menus: values[0]\n            };\n          });\n          return _context.abrupt(\"return\", result);\n\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nvar withData = function withData(Page) {\n  var withDataWrapper = function withDataWrapper(props) {\n    return __jsx(Page, props);\n  };\n\n  withDataWrapper.getInitialProps = function _callee(context) {\n    var appData;\n    return _regeneratorRuntime.async(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!clientStore) {\n              _context2.next = 4;\n              break;\n            }\n\n            _context2.t0 = clientStore.appData;\n            _context2.next = 7;\n            break;\n\n          case 4:\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(fetchGlobalData());\n\n          case 6:\n            _context2.t0 = _context2.sent;\n\n          case 7:\n            appData = _context2.t0;\n\n            if (clientStore && !clientStore.appData) {\n              clientStore.appData = appData;\n            }\n\n            _context2.t1 = _objectSpread;\n            _context2.t2 = {};\n\n            if (!Page.getInitialProps) {\n              _context2.next = 17;\n              break;\n            }\n\n            _context2.next = 14;\n            return _regeneratorRuntime.awrap(Page.getInitialProps(context));\n\n          case 14:\n            _context2.t3 = _context2.sent;\n            _context2.next = 18;\n            break;\n\n          case 17:\n            _context2.t3 = {};\n\n          case 18:\n            _context2.t4 = _context2.t3;\n            _context2.t5 = {\n              appData: appData\n            };\n            return _context2.abrupt(\"return\", (0, _context2.t1)(_context2.t2, _context2.t4, _context2.t5));\n\n          case 21:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  return withDataWrapper;\n};\n\nexport default withData;","map":null,"metadata":{},"sourceType":"module"}