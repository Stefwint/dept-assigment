{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { get } from '../api/callers';\nvar isServer = true;\nvar clientStore = isServer ? null : {};\n\nfunction fetchGlobalData() {\n  var menus, result;\n  return _regeneratorRuntime.async(function fetchGlobalData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          menus = get('menus/').then(function (resp) {\n            return resp;\n          });\n          result = Promise.all([menus]).then(function (values) {\n            menus: values[0];\n          });\n          return _context.abrupt(\"return\", result);\n\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nvar withData = function withData(Page) {\n  var withDataWrapper = function withDataWrapper(props) {\n    return __jsx(Page, props);\n  };\n\n  withDataWrapper.getInitialProps = function _callee(context) {\n    var appData;\n    return _regeneratorRuntime.async(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!clientStore) {\n              _context2.next = 4;\n              break;\n            }\n\n            _context2.t0 = clientStore.appData;\n            _context2.next = 7;\n            break;\n\n          case 4:\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(fetchGlobalData());\n\n          case 6:\n            _context2.t0 = _context2.sent;\n\n          case 7:\n            appData = _context2.t0;\n\n            if (clientStore && !clientStore.appData) {\n              clientStore.appData = appData;\n            }\n\n            _context2.t1 = _objectSpread;\n            _context2.t2 = {};\n\n            if (!Page.getInitialProps) {\n              _context2.next = 17;\n              break;\n            }\n\n            _context2.next = 14;\n            return _regeneratorRuntime.awrap(Page.getInitialProps(context));\n\n          case 14:\n            _context2.t3 = _context2.sent;\n            _context2.next = 18;\n            break;\n\n          case 17:\n            _context2.t3 = {};\n\n          case 18:\n            _context2.t4 = _context2.t3;\n            _context2.t5 = {\n              appData: appData\n            };\n            return _context2.abrupt(\"return\", (0, _context2.t1)(_context2.t2, _context2.t4, _context2.t5));\n\n          case 21:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  return withDataWrapper;\n};\n\nexport default withData;","map":{"version":3,"sources":["/Users/stefwinterswijk/Werk/dept/src/container/withData.jsx"],"names":["React","get","isServer","clientStore","fetchGlobalData","menus","then","resp","result","Promise","all","values","withData","Page","withDataWrapper","props","getInitialProps","context","appData"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,QAAoB,gBAApB;AAEA,IAAMC,QAAQ,OAAd;AACA,IAAMC,WAAW,GAAGD,QAAQ,GAAG,IAAH,GAAU,EAAtC;;AAEA,SAAeE,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,UAAAA,KADR,GACgBJ,GAAG,CAAC,QAAD,CAAH,CAAcK,IAAd,CAAmB,UAAAC,IAAI;AAAA,mBAAIA,IAAJ;AAAA,WAAvB,CADhB;AAGQC,UAAAA,MAHR,GAGiBC,OAAO,CAACC,GAAR,CAAY,CAACL,KAAD,CAAZ,EAAqBC,IAArB,CAA0B,UAAAK,MAAM,EAAI;AACjDN,YAAAA,KAAK,EAAEM,MAAM,CAAC,CAAD,CAAN;AACR,WAFc,CAHjB;AAAA,2CAOSH,MAPT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAUA,IAAMI,QAAQ,GAAG,SAAXA,QAAW,CAAAC,IAAI,EAAI;AACvB,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK;AAAA,WAAI,MAAC,IAAD,EAAUA,KAAV,CAAJ;AAAA,GAA7B;;AACAD,EAAAA,eAAe,CAACE,eAAhB,GAAkC,iBAAMC,OAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAChBd,WADgB;AAAA;AAAA;AAAA;;AAAA,2BACFA,WAAW,CAACe,OADV;AAAA;AAAA;;AAAA;AAAA;AAAA,6CAC0Bd,eAAe,EADzC;;AAAA;AAAA;;AAAA;AAC1Bc,YAAAA,OAD0B;;AAGhC,gBAAIf,WAAW,IAAI,CAACA,WAAW,CAACe,OAAhC,EAAyC;AACvCf,cAAAA,WAAW,CAACe,OAAZ,GAAsBA,OAAtB;AACD;;AAL+B;AAAA;;AAAA,iBAQ1BL,IAAI,CAACG,eARqB;AAAA;AAAA;AAAA;;AAAA;AAAA,6CAQGH,IAAI,CAACG,eAAL,CAAqBC,OAArB,CARH;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,2BAQmC,EARnC;;AAAA;AAAA;AAAA;AAS9BC,cAAAA,OAAO,EAAPA;AAT8B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlC;;AAaA,SAAOJ,eAAP;AACD,CAhBD;;AAkBA,eAAeF,QAAf","sourcesContent":["import React from 'react';\nimport { get } from '../api/callers';\n\nconst isServer = typeof window === 'undefined';\nconst clientStore = isServer ? null : {};\n\nasync function fetchGlobalData() {\n  const menus = get('menus/').then(resp => resp);\n\n  const result = Promise.all([menus]).then(values => {\n    menus: values[0];\n  });\n\n  return result;\n}\n\nconst withData = Page => {\n  const withDataWrapper = props => <Page {...props} />;\n  withDataWrapper.getInitialProps = async context => {\n    const appData = clientStore ? clientStore.appData : await fetchGlobalData();\n\n    if (clientStore && !clientStore.appData) {\n      clientStore.appData = appData;\n    }\n\n    return {\n      ...(Page.getInitialProps ? await Page.getInitialProps(context) : {}),\n      appData,\n    };\n  };\n\n  return withDataWrapper;\n};\n\nexport default withData;\n"]},"metadata":{},"sourceType":"module"}