{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport Link from 'next/link';\nimport parse from 'html-react-parser';\nimport uuid from 'uuid';\nimport GravityForm from '../GravityForm';\nimport Wysiwyg from './style';\nimport { parsePath, parseLink } from '../../utils';\nimport config from '../../theme.config';\nimport { Button } from '../styles';\n\nvar WYSIWYG =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(WYSIWYG, _Component);\n\n  function WYSIWYG() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, WYSIWYG);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(WYSIWYG)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"renderChildren\", function (node) {\n      if (node.children && !node.children.length) return false;\n      return node.children.map(function (el) {\n        return _this.renderChild(el);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderChild\", function (node) {\n      if (node.type === 'tag') {\n        var TagName = node.name;\n\n        if (TagName === 'img') {\n          return __jsx(\"img\", node.attribs);\n        }\n\n        return __jsx(TagName, {\n          key: uuid()\n        }, node.data ? node.data : _this.renderChildren(node));\n      }\n\n      return node.data;\n    });\n\n    return _this;\n  }\n\n  _createClass(WYSIWYG, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          content = _this$props.content,\n          color = _this$props.color,\n          fontSize = _this$props.fontSize,\n          className = _this$props.className,\n          firstPBold = _this$props.firstPBold,\n          titleColor = _this$props.titleColor,\n          excerptButtonMargin = _this$props.excerptButtonMargin,\n          props = _objectWithoutProperties(_this$props, [\"content\", \"color\", \"fontSize\", \"className\", \"firstPBold\", \"titleColor\", \"excerptButtonMargin\"]);\n\n      var parsedContent = parse(content, {\n        replace: function replace(domNode) {\n          if (domNode.type === 'tag' && domNode.name === 'a') {\n            // check if link is path to file or link host is different than current one\n            if (domNode.attribs && domNode.attribs[\"class\"]) {\n              domNode.attribs.className = domNode.attribs[\"class\"];\n              delete domNode.attribs[\"class\"];\n            }\n\n            if (!domNode.attribs || domNode.attribs && domNode.attribs.href && domNode.attribs.href.split('/').pop().indexOf('.') > -1 || domNode.attribs.href.indexOf(config.wordpress.url.frontend) === -1) {\n              return __jsx(\"a\", domNode.attribs, _this2.renderChildren(domNode));\n            }\n\n            if (domNode.attribs.href) {\n              var _domNode$attribs;\n\n              var linkAttrs = _objectSpread({}, domNode === null || domNode === void 0 ? void 0 : domNode.attribs);\n\n              if ((linkAttrs === null || linkAttrs === void 0 ? void 0 : linkAttrs['data-type']) && (linkAttrs === null || linkAttrs === void 0 ? void 0 : linkAttrs['data-slug'])) {\n                delete linkAttrs['data-type'];\n                delete linkAttrs['data-slug'];\n              }\n\n              var styles = {};\n\n              if ((domNode === null || domNode === void 0 ? void 0 : domNode.attribs) && (domNode === null || domNode === void 0 ? void 0 : (_domNode$attribs = domNode.attribs) === null || _domNode$attribs === void 0 ? void 0 : _domNode$attribs.style)) {\n                var attributes = domNode.attribs.style.split(';');\n\n                for (var i = 0; i < attributes.length; i++) {\n                  if (attributes[i]) {\n                    var entry = attributes[i].split(':');\n                    styles[entry.splice(0, 1)[0]] = entry.join(':');\n                  }\n                }\n\n                delete domNode.attribs.style;\n              }\n\n              return __jsx(Link, {\n                href: domNode.attribs['data-slug'] ? \"/\".concat(domNode.attribs['data-type'], \"?slug=\").concat(domNode.attribs['data-slug']) : domNode.attribs.href,\n                as: domNode.attribs.href\n              }, __jsx(\"a\", _extends({}, linkAttrs, {\n                href: domNode.attribs.href,\n                style: styles\n              }), _this2.renderChildren(domNode)));\n            }\n          } else if (domNode.type === 'tag' && domNode.name === 'gravityform') {\n            return __jsx(GravityForm, {\n              key: uuid(),\n              formID: domNode.attribs.id\n            });\n          } else if (domNode.type === 'tag' && domNode.name === 'button') {\n            var href = domNode.attribs.slug && domNode.attribs.type ? \"/\".concat(domNode.attribs.type, \"?slug=\").concat(domNode.attribs.slug) : domNode.attribs.link;\n            var isExternal = domNode.attribs.external && domNode.attribs.external === 'true';\n            return __jsx(Link, {\n              href: href,\n              as: domNode.attribs.link,\n              passHref: true\n            }, __jsx(Button, _extends({\n              target: isExternal ? '_blank' : undefined,\n              as: \"a\",\n              mr: 16,\n              mb: 10\n            }, domNode.attribs), _this2.renderChildren(domNode)));\n          }\n        }\n      });\n      return __jsx(Wysiwyg, _extends({\n        className: className,\n        color: color,\n        fontSize: fontSize\n      }, props), parsedContent);\n    }\n  }]);\n\n  return WYSIWYG;\n}(Component);\n\nexport default WYSIWYG;","map":{"version":3,"sources":["/Users/stefwinterswijk/Werk/dept/src/components/Wysiwyg/Wysiwyg.jsx"],"names":["React","Component","Link","parse","uuid","GravityForm","Wysiwyg","parsePath","parseLink","config","Button","WYSIWYG","node","children","length","map","el","renderChild","type","TagName","name","attribs","data","renderChildren","props","content","color","fontSize","className","firstPBold","titleColor","excerptButtonMargin","parsedContent","replace","domNode","href","split","pop","indexOf","wordpress","url","frontend","linkAttrs","styles","style","attributes","i","entry","splice","join","id","slug","link","isExternal","external","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Link from 'next/link';\nimport parse from 'html-react-parser';\nimport uuid from 'uuid';\nimport GravityForm from '../GravityForm';\nimport Wysiwyg from './style';\nimport { parsePath, parseLink } from '../../utils';\nimport config from '../../theme.config';\nimport { Button } from '../styles';\n\nclass WYSIWYG extends Component {\n  renderChildren = node => {\n    if (node.children && !node.children.length) return false;\n    return node.children.map(el => this.renderChild(el));\n  };\n\n  renderChild = node => {\n    if (node.type === 'tag') {\n      const TagName = node.name;\n      if (TagName === 'img') {\n        return <img {...node.attribs} />;\n      }\n      return <TagName key={uuid()}>{node.data ? node.data : this.renderChildren(node)}</TagName>;\n    }\n    return node.data;\n  };\n\n  render() {\n    const {\n      content,\n      color,\n      fontSize,\n      className,\n      firstPBold,\n      titleColor,\n      excerptButtonMargin,\n      ...props\n    } = this.props;\n    const parsedContent = parse(content, {\n      replace: domNode => {\n        if (domNode.type === 'tag' && domNode.name === 'a') {\n          // check if link is path to file or link host is different than current one\n          if (domNode.attribs && domNode.attribs.class) {\n            domNode.attribs.className = domNode.attribs.class;\n            delete domNode.attribs.class;\n          }\n          if (\n            !domNode.attribs ||\n            (domNode.attribs &&\n              domNode.attribs.href &&\n              domNode.attribs.href\n                .split('/')\n                .pop()\n                .indexOf('.') > -1) ||\n            domNode.attribs.href.indexOf(config.wordpress.url.frontend) === -1\n          ) {\n            return <a {...domNode.attribs}>{this.renderChildren(domNode)}</a>;\n          }\n          if (domNode.attribs.href) {\n            const linkAttrs = { ...domNode?.attribs };\n            if (linkAttrs?.['data-type'] && linkAttrs?.['data-slug']) {\n              delete linkAttrs['data-type'];\n              delete linkAttrs['data-slug'];\n            }\n            const styles = {};\n            if (domNode?.attribs && domNode?.attribs?.style) {\n              const attributes = domNode.attribs.style.split(';');\n              for (let i = 0; i < attributes.length; i++) {\n                if (attributes[i]) {\n                  const entry = attributes[i].split(':');\n                  styles[entry.splice(0, 1)[0]] = entry.join(':');\n                }\n              }\n              delete domNode.attribs.style;\n            }\n            return (\n              <Link\n                href={\n                  domNode.attribs['data-slug']\n                    ? `/${domNode.attribs['data-type']}?slug=${domNode.attribs['data-slug']}`\n                    : domNode.attribs.href\n                }\n                as={domNode.attribs.href}\n              >\n                <a {...linkAttrs} href={domNode.attribs.href} style={styles}>\n                  {this.renderChildren(domNode)}\n                </a>\n              </Link>\n            );\n          }\n        } else if (domNode.type === 'tag' && domNode.name === 'gravityform') {\n          return <GravityForm key={uuid()} formID={domNode.attribs.id} />;\n        } else if (domNode.type === 'tag' && domNode.name === 'button') {\n          const href =\n            domNode.attribs.slug && domNode.attribs.type\n              ? `/${domNode.attribs.type}?slug=${domNode.attribs.slug}`\n              : domNode.attribs.link;\n\n          const isExternal = domNode.attribs.external && domNode.attribs.external === 'true';\n          return (\n            <Link href={href} as={domNode.attribs.link} passHref>\n              <Button\n                target={isExternal ? '_blank' : undefined}\n                as=\"a\"\n                mr={16}\n                mb={10}\n                {...domNode.attribs}\n              >\n                {this.renderChildren(domNode)}\n              </Button>\n            </Link>\n          );\n        }\n      },\n    });\n    return (\n      <Wysiwyg className={className} color={color} fontSize={fontSize} {...props}>\n        {parsedContent}\n      </Wysiwyg>\n    );\n  }\n}\n\nexport default WYSIWYG;\n"]},"metadata":{},"sourceType":"module"}